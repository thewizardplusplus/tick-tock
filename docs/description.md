### ![](logo/logo.png) Общее описание

Tick-tock — интерпретируемый высокоуровневый язык программирования. Представляет собой конкурентную (по модели акторов) машину Тьюринга.

#### Исходники

Файлы исходного кода должны быть в кодировке UTF-8 и иметь концы строк как в UNIX (LF).

#### Ключевые слова

8 ключевых слов: `actor`, `state`, `message`, `send`, `set`, `out`, `sleep`, `exit`.

#### Сущности

##### Числа

Поддерживаются только числовые константы.

Определение:

* целые — `/\b((0x[\da-f]+)|(0[0-7]+)|(\d+(e\d+)?)|(\d+e[\+\-]\d+))\b/i`;
* вещественные — `/(\.\d+(e[\+\-]\d+)?)\b|\b\d+\.\d*((e[\+\-]\d+)?\b)?/i`.

##### Строки

Поддерживаются только строковые константы.

Определение:

- интерпретируемые — `/"(\\.|[^"\n])*?"/`;
- сырые — `` /`[^`]*?`/ ``.

Интерпретируемые могут содержать управляющие последовательности. В частности, следующие:

- `/\\t/` &mdash; символ табуляции;
- `/\\n/` &mdash; символ перевода строки;
- `/\\x[a-f\d]{2}/i` &mdash; любой ASCII-символ, записанный в виде своего кода в шестнадцатеричном формате.

Подробнее см. здесь: https://golang.org/ref/spec#String_literals

##### Обработчики сообщений

Содержат имя обрабатываемого сообщения и список команд, которые необходимо выполнить при получении данного сообщения.

Объявление:

```
"message", identifier,
  command, {command},
";"
```

Здесь `identifier` — имя обрабатываемого сообщения.

##### Состояния

Содержат имя состояния актора и список обработчиков сообщений, относящихся к этому состоянию.

Объявление:

```
"state", identifier,
  message, {message},
";"
```

Здесь `identifier` — имя состояния актора.

##### Акторы

Представляют собой зелёные (легковесные) потоки. Содержат список поддерживаемых состояний. По умолчанию находятся в состоянии `__initialization__`.

Объявление:

```
"actor",
  state, {state},
";"
```

#### Команды

##### Команда `send`

Отправляет указанное сообщение всем акторам. Операция асинхронная.

Синтаксис:

```
"send", identifier
```

Здесь `identifier` — имя сообщения.

##### Команда `set`

Устанавливает указанное состояние текущему актору. Операция синхронная.

Синтаксис:

```
"set", identifier
```

Здесь `identifier` — имя состояния.

##### Команда `out`

Выводит указанную строку в stdout. Операция синхронная.

Синтаксис:

```
"out", STRING
```

Здесь `STRING` — строковая константа.

##### Команда `sleep`

Приостанавливает работу актора на случайное время из указанного диапазона. Операция синхронная.

Синтаксис:

```
"sleep", MINIMUM, ",", MAXIMUM
```

Здесь `MINIMUM` и `MAXIMUM` — числовые константы, обозначающие время в секундах. Диапазон имеет вид `[MINIMUM, MAXIMUM)`.

##### Команда `exit`

Завершает выполнение скрипта с кодом возврата 0. Операция синхронная.

Синтаксис:

```
"exit"
```

#### Точка входа

Интерпретатор **асинхронно** запускает все предоставленные акторы. После чего отправляет всем сообщение `__initialize__`.

#### Комментарии

Однострочные: `/\/\/.*/`.

Многострочные: `/\/\*.*?\*\//s`.
