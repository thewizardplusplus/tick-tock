### ![](logo/logo.png) Рантайм

- константы:
  - общие константы:
    - `nil: nil` &mdash; значение нулевого типа;
  - логические константы:
    - `false` &mdash; число 0;
    - `true` &mdash; число 1;
  - математические константы:
    - `nan: num`;
    - `inf: num` &mdash; положительная бесконечность;
    - `pi: num`;
    - `e: num`;
  - константы для работы со списками:
    - `__empty_list__: list<any>` &mdash; пустой список;
  - константы для работы с хеш-таблицами:
    - `__empty_hash__: hash<any, any>` &mdash; пустая хеш-таблица;
- функции:
  - общие функции:
    - функции для сравнения:
      - `__eq__(x: any, y: any): bool` &mdash; равно;
      - `__ne__(x: any, y: any): bool` &mdash; не равно;
      - `__lt__(x: any, y: any): bool` &mdash; меньше;
      - `__le__(x: any, y: any): bool` &mdash; меньше или равно;
      - `__gt__(x: any, y: any): bool` &mdash; больше;
      - `__ge__(x: any, y: any): bool` &mdash; больше или равно;
    - `__add__(x: num|list<any>|hash<any, any>, y: num|list<any>|hash<any, any>): num|list<any>|hash<any, any>` &mdash; возвращает результат комбинирования переданных аргументов:
      - если оба аргумента имеют тип `num`, то функция возвращает результат их сложения;
      - если оба аргумента имеют тип `list<any>`, то функция возвращает результат их конкатенации;
      - если оба аргумента имеют тип `hash<any, any>`, то функция возвращает результат их слияния;
    * `__item__(container: list<any>|hash<any, any>, index: any): any` &mdash; возвращает элемент `index` из контейнера `container`:
      - если `container` имеет тип `list<any>`, то функция возвращает элемент с индексом `index`; если индекс выходит за границы списка, будет возвращён `nil`;
      - если `container` имеет тип `hash<any, any>`, то функция возвращает значение, соответствующее ключу `index`; если ключ отсутствует в хеш-таблице, будет возвращён `nil`;
    - `type(value: any): str` &mdash; возвращает имя типа значения `value`;
    - `size(value: list<any>|hash<any, any>): num` &mdash; возвращает размер (длину) значения `value`;
  - функции для работы с логическими значениями:
    - `__logical_not__(value: any): bool` &mdash; логическое отрицание;
    - `bool(value: any): bool` &mdash; преобразует значение в логический тип: возвращает строго 0 или 1;
  - функции для работы с числами:
    - `__neg__(x: num): num` &mdash; унарный минус;
    - `__sub__(x: num, y: num): num` &mdash; вычитание;
    - `__mul__(x: num, y: num): num` &mdash; умножение;
    - `__div__(x: num, y: num): num` &mdash; деление;
    - `__mod__(x: num, y: num): num` &mdash; остаток от деления;
    - битовые функции:
      - `__bitwise_not__(x: num): num` &mdash; побитовое отрицание;
      - `__lshift__(x: num, y: num): num` &mdash; сдвиг влево;
      - `__rshift__(x: num, y: num): num` &mdash; сдвиг вправо;
      - `__urshift__(x: num, y: num): num` &mdash; беззнаковый сдвиг вправо;
      - `__and__(x: num, y: num): num` &mdash; побитовая конъюнкция;
      - `__xor__(x: num, y: num): num` &mdash; побитовая исключающая дизъюнкция;
      - `__or__(x: num, y: num): num` &mdash; побитовая дизъюнкция;
    - математические функции:
      - `floor(x: num): num`;
      - `ceil(x: num): num`;
      - `trunc(x: num): num`;
      - `round(x: num): num`;
      - `sin(x: num): num`;
      - `cos(x: num): num`;
      - `tn(x: num): num`;
      - `arcsin(x: num): num`;
      - `arccos(x: num): num`;
      - `arctn(x: num): num`;
      - `angle(x: num, y: num): num` &mdash; atan2;
      - `pow(base: num, exponent: num): num`;
      - `sqrt(x: num): num`;
      - `exp(x: num): num`;
      - `ln(x: num): num`;
      - `lg(x: num): num`;
      - `abs(x: num): num`;
      - `is_nan(x: num): bool`;
      - генерация псевдослучайных чисел:
        - `seed(seed: num): nil` &mdash; устанавливает начальное состояние генератора псевдослучайных чисел;
        - `random(): num` &mdash; возвращает псевдослучайное число в диапазоне [0; 1);
  - функции для работы со списками:
    - `__cons__(head: any, tail: list<any>): list<any>` &mdash; конструирует новый список из головы `head` и хвоста `tail`;
    - `head(list: list<any>): any` &mdash; возвращает голову списка `list`; список не должен быть пустым;
    - `tail(list: list<any>): list<any>` &mdash; возвращает хвост списка `list`; список не должен быть пустым;
  - функции для работы со строками:
    - `num(text: str): nil|num` &mdash; парсит число из строки `text`; при ошибке парсинга будет возвращён `nil`;
    - `str(value: any): str` &mdash; преобразует значение `value` в строку; для хеш-таблиц действует, как функция `strh` (см. ниже);
    - `strb(value: any): str` &mdash; преобразует значение `value` в строку, как логическое: если `value` истинно, возвращает `"true"`, иначе &mdash; `"false"`;
    - `strs(text: str): str` &mdash; преобразует строку `text` в другую строку, экранируя её символы и окружая всю строку кавычками;
    - `strl(list: list<str>): str` &mdash; преобразует список строк `list` в строку, отображая при этом строки как строки;
    - `strh(hash: hash<str, any>): str` &mdash; преобразует хеш-таблицу `hash`, у которой ключи имеют строковый тип, в строку, отображая при этом ключи как строки;
    - `strhh(hash: hash<str, str>): str` &mdash; преобразует хеш-таблицу `hash`, у которой и ключи, и значения имеют строковый тип, в строку, отображая при этом и ключи, и значения как строки;
  - функции для работы с хеш-таблицами:
    - `__with__(hash: hash<any, any>, key: any, value: any): hash<any, any>` &mdash; если `value` не равно `nil`, то возвращает новую хеш-таблицу, в которую было добавлено значение `value` с ключом `key`; если `value` равно `nil`, то возврашает новую хеш-таблицу, из которой было удалено значение с ключом `key`;
    - `with(hash: hash<any, any>, key: any, value: any): hash<any, any>` &mdash; алиас функции `__with__` (см. выше);
    - `keys(hash: hash<any, any>): list<any>` &mdash; возвращает список ключей хеш-таблицы `hash`;
  - функции для работы с классами акторов:
    - `name(actorClass: class): str` &mdash; возвращает имя класса акторов `actorClass`;
  - системные функции:
    - `env(name: str): nil|str` &mdash; возвращает значение переменной окружения `name`, если она установлена; в противном случае возвращается `nil`;
    - `time(): num` &mdash; возвращает текущее UNIX-время по UTC в секундах;
    - `sleep(duration: num): nil` &mdash; останавливает выполнение скрипта на `duration` секунд; `duration` может быть вещественным числом;
    - `exit(exitCode: num): nil` &mdash; завершает выполнение скрипта; код возврата будет равен `exitCode`;
    - функции для ввода/вывода:
      - `in(count: num): nil|str` &mdash; считывает `count` символов из stdin и возвращает их в виде строки; если количество будет отрицательным, то будут считаны все доступные символы; при ошибке чтения будет возвращён `nil`;
      - `inln(count: num): nil|str` &mdash; считывает `count` символов из stdin и возвращает их в виде строки; если количество будет отрицательным, то будут считаны все символы до символа `'\n'`; при ошибке чтения или отсутствии символа `'\n'` будет возвращён `nil`;
      - `out(text: str): nil` &mdash; выводит строку `text` в stdout;
      - `outln(text: str): nil` &mdash; выводит строку `text` в stdout и переводит строку (добавляет символ `'\n'`);
      - `err(text: str): nil` &mdash; выводит строку `text` в stderr;
      - `errln(text: str): nil` &mdash; выводит строку `text` в stderr и переводит строку (добавляет символ `'\n'`).
